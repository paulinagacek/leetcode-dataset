class Solution:
    def minOperations(self, grid: List[List[int]], x: int) -> int:
        # method: sort, math (the minimun one is the middle one)
        # step1: sort
        # step2: check middle one and calcualte the distance
        # time-complexity: O(mnlog(mn))
        # space-complexity: O(mn)
        def getDis(target):
            cur = 0
            for d in s:
                dis = abs(d-target)
                if dis%x!=0:
                    return -1
                cur += (dis//x)
            return cur
            
        m, n = len(grid), len(grid[0])
        s = []
        for i in range(m):
            for j in range(n):
                s.append(grid[i][j])
        s.sort()
        target = s[len(s)//2]
        return getDis(target)