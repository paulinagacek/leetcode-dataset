class Solution:
    def groupThePeople(self, groupSizes: List[int]) -> List[List[int]]:
#         from collections import defaultdict
#         size_index_map = defaultdict(list)
#         for index,size in enumerate(groupSizes):
#             size_index_map[size].append(index)
        
#         ans = []
#         for size, people in size_index_map.items():
#             curr = []
#             while people:
#                 curr.append(people.pop())
#                 if len(curr)==size:
#                     ans.append(curr)
#                     curr = []
#         return ans
    
        # what can we do to optmize ? 
        from collections import defaultdict
        size_index_map = defaultdict(list)
        ans = []
        for index,size in enumerate(groupSizes):
            #print (size_index_map)
            if size in size_index_map:
                if len(size_index_map[size]) == size:
                    ans.append(size_index_map[size])
                    del size_index_map[size]
            size_index_map[size].append(index)
                
        # collect leftovers
        for size, people in size_index_map.items():
            ans.append(people)
            
        return ans