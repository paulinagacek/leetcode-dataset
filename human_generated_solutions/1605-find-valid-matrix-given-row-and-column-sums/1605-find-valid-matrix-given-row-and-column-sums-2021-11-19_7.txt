\'\'\'
(1)We think about the example rowSum = [5, 4, 3] and colSum = [4, 7]. Then we fill all the values except for the last rows and last cols like this.

   8 3 1
5  0 0 5
4  0 0 4
3  8 3 -8

(2)Since negative number is not allowd, the element at 2, 2 is -8 (< 0) and we need to fix this.
In order to fix it, make it 0 and remove 8 from the above value and left value, and add 8 to the upper left value.

   8 3 1
5  0 0 5
4  0 8 -4
3  8 -5 0

(3)Repeat this process from the right bottom value to top left value.

Move -4
   8 3 1
5  0 4 1
4  0 4 0
3  8 -5 0

Move -5
   8 3 1
5  0 4 1
4  5 -1 0
3  3 0 0

Move -1
   8 3 1
5  1 3 1
4  4 0 0
3  3 0 0

\'\'\'

class Solution:
    def restoreMatrix(self, rowSum: List[int], colSum: List[int]) -> List[List[int]]:
        def in_range(i, j):
            return 0 <= i < R and 0 <= j < C
        
        def move(i, j):
            val = -grid[i][j]
            grid[i][j] = 0
            grid[i - 1][j] -= val
            grid[i][j - 1] -= val
            grid[i - 1][j - 1] += val
            
        
        R, C = len(rowSum), len(colSum)
        grid = [[0 for _ in range(C)] for _ in range(R)]
        
        #initialize
        for i in range(R - 1):
            grid[i][-1] = rowSum[i]
        for j in range(C - 1):
            grid[-1][j] = colSum[j]
        grid[-1][-1] = colSum[-1] - sum(rowSum[:-1])
        
        #make adjustment
        for i in range(R + C - 1):
            if i < C:
                curr_i, curr_j = R - 1, C - 1 - i
                while in_range(curr_i, curr_j):
                    if grid[curr_i][curr_j] < 0:
                        move(curr_i, curr_j)
                    curr_i -= 1
                    curr_j += 1

            else:
                curr_i, curr_j = R - (i - C) - 2, 0
                while in_range(curr_i, curr_j):
                    if grid[curr_i][curr_j] < 0:
                        move(curr_i, curr_j)
                    curr_i -= 1
                    curr_j += 1
            
        
        return grid