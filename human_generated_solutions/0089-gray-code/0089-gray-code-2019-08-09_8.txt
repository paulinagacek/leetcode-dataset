class Solution(object):
    def grayCode(self, n):
        """
        :type n: int
        :rtype: List[int]
        """
        targetLevel = 2**n
        ans = []
        
        self.DFS(n, ans, 0, 1, targetLevel)   # Start with number = 0 (000), level = 1
        
        return ans
    
    
    def DFS(self, n, ans, num, level, targetLevel):
        if num in ans:
            return
        
        ans.append(num)
        
        if level == targetLevel:
            return
        
        for i in range(0, n):
            self.DFS(n, ans, num ^ (1 << i), level+1, targetLevel)  # num ^ (1 << i): revert a bit at a time
            
            if len(ans) == targetLevel: return  # result found. Stop.