class Solution:
    #progress the cells to the next day
    def next_day(self, cells):
        prev = cells[0]
        for i in range(1,7):
            p = cells[i]
            cells[i] = 1 if prev == cells[i + 1] else 0
            prev = p
        cells[0]=cells[7]=0
        return cells
    
    def prisonAfterNDays(self, cells: List[int], n: int) -> List[int]:
        #store all seen cells and the iteration step
        seen = []
        for i in range(n):        
            cells = self.next_day(cells)
            
            #check if current day was already seen
            if cells in seen:
                last_seen = seen.index(cells)
                days_in_cycle = abs(i - last_seen)
        
                #find which index in the cycle is the last day n 
                cropped_days =  (n-i) % days_in_cycle
                #copy arrs from seen starting from where the cycle started
                arr = seen[last_seen:] 
                #sub 1 to get the correct day
                return arr[cropped_days - 1]
            #save current step to look up later
            seen.append(cells[:])
            n-=1
        return cells