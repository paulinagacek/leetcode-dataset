class Solution(object):
    def get_data(self, head):
        if head is None:
            return []
        res = []
        current = head
        while current:
            res.append(current.val)
            current = current.next
        return res

    def removeZeroSumSublists(self, head):
        lst = [v for v in self.get_data(head) if v]
        stack = []
        for v in lst:
            if not stack:
                stack.append(v)
            else:
                sum_nums = v
                for i in range(len(stack) - 1, -1, -1):
                    sum_nums += stack[i]
                    if not sum_nums:
                        stack = stack[:i]
                        break
                else:
                    stack.append(v)
        if stack:
            new_head = ListNode(stack[0])
            tmp = new_head
            for i in range(1, len(stack)):
                tmp.next = ListNode(stack[i])
                tmp = tmp.next
        else:
            new_head = None
        return new_head