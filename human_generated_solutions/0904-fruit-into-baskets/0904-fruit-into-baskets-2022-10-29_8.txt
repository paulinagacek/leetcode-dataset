# class Solution:
#     # Time : O(n^2) | Space : O(1)
#     def totalFruit(self, fruits: List[int]) -> int:
#         max_trees = 0
#         for i in range(len(fruits)):
#             num_fruits = {}
#             fruit_types = 0
#             for j in range(i, len(fruits), 1):

#                 if fruits[j] not in num_fruits:
#                     fruit_types += 1
#                     if fruit_types > 2:
#                         break
#                     num_fruits[fruits[j]] = 1
#                 else:
#                     num_fruits[fruits[j]] += 1
            
#             count = 0
#             for _, v in num_fruits.items():
#                 count += v
#             max_trees = max(count, max_trees)
        
#         return max_trees

class Solution:
    # Time : O(n) | Space : O(1)
    def totalFruit(self, fruits: List[int]) -> int:
        start = 0 
        end = 0
        max_len = 0
        fruits_type = {}
        while end < len(fruits):
            fruits_type[fruits[end]] = end # storing the index of the fruit
            if len(fruits_type) >= 3:
                # need to pop the fruit with the minimum index
                min_idx = min(fruits_type.values())
                del fruits_type[fruits[min_idx]]
                # update the new shart
                start = min_idx + 1
            max_len = max(max_len, end - start + 1)
            end += 1
        return max_len