class Solution:
    def maximumGain(self, s: str, x: int, y: int) -> int:
        def remove(s, tgt, score):
            stk = []
            total = 0
            for c in s:
                if stk and (stk[-1] + c) == tgt:
                    stk.pop()
                    total += score
                else:
                    stk.append(c)
            return (\'\'.join(stk), total)
        tgt1 = \'ab\' if x > y else \'ba\'
        score1 = x if x > y else y
        newS, total1 = remove(s, tgt1, score1) # greedily remove more valuable substring
        tgt2 = \'ba\' if x > y else \'ab\'
        score2 = y if x > y else x
        _, total2 = remove(newS, tgt2, score2) # remove the less valuable substring
        return total1 + total2