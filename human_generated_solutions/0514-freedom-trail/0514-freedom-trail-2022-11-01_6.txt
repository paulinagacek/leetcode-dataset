def findRotateSteps(self, ring: str, key: str) -> int:
    n = len(ring)

    indices = defaultdict(list)
    for i in range(n):
        indices[ring[i]].append(i)

    @lru_cache(None)
    def dp(i, j):
        if j == len(key):
            return 0
        
        steps = inf
        for idx in indices[key[j]]:
            steps = min(steps, dp(idx, j+1) + min(abs(i - idx), n - abs(i - idx)))
        
        return steps
    
    return dp(0, 0) + len(key)