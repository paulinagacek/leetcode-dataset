from string import ascii_lowercase

class TriNode:
    def __init__(self, val):
        self.val = val
        self.next = [0]*26
        self.isLeaf = False

class Solution:
    def suggestedProducts(self, products: List[str], searchWord: str) -> List[List[str]]:
        
        root = TriNode("")
        localResult = []
        globalResult = []
        
        def insertInTrie(word):
            
            curr = root
            for letter in word:
                index = ord(letter)%97
                if curr.next[index] == 0:
                    curr.next[index] = TriNode(letter)
                curr = curr.next[index]
            curr.isLeaf = True
        
        
        def dfs(node, word):
            if len(localResult) == 3:
                return
            if node.isLeaf:
                localResult.append(word)
                
            for letter in ascii_lowercase:
                index = ord(letter)%97
                if node.next[index] != 0:
                    dfs(node.next[index],word+letter)
            
        
        def searchInTrie(word):
            curr = root
            for letter in word:
                index = ord(letter)%97
                if curr.next[index] == 0:
                    return
                curr = curr.next[index]
            dfs(curr,word)
        
        
        for word in products:
            insertInTrie(word)
        
        for i in range(1,len(searchWord)+1):
            searchInTrie(searchWord[:i])
            globalResult.append(localResult)
            localResult = []
        
        return globalResult