class Solution:
    def numSubarraysWithSum(self, nums: List[int], goal: int) -> int:
        for i in range(1, len(nums)):
            nums[i] += nums[i - 1]
        preSum = [0] + nums
        d, count = defaultdict(int), 0
        for idx, val in enumerate(preSum):
            res = val - goal
            if res in d:
                count += d[res]
            d[val] += 1
        return count