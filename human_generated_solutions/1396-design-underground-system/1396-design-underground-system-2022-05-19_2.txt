class Event:
    def __init__(self,id, stationName, time):
        self.id = id
        self.stationName = stationName
        self.time = time
        
class Average: 
    def __init__(self, total, count):
        self.total = total
        self.count = count
        
    def updateAverage(self, diff):
        self.count += 1
        self.total += diff
        
    def getAverage(self):
        return self.total / self.count
        

class UndergroundSystem:

    def __init__(self):
        self.arrivals = {}
        self.averages = {}
        

    def checkIn(self, id: int, stationName: str, t: int) -> None:
        self.arrivals[id] = Event(id, stationName, t)
        

    def checkOut(self, id: int, stationName: str, t: int) -> None:
        arrivalEvent = self.arrivals.get(id)
        self.arrivals.pop(id)
        
        diff = t - arrivalEvent.time
        
        key = (arrivalEvent.stationName, stationName)
        
        average = self.averages[key] if key in self.averages else Average(0, 0)
        average.updateAverage(diff)
        
        self.averages[key] = average
        

    def getAverageTime(self, startStation: str, endStation: str) -> float:
        key = (startStation, endStation)
        
        return self.averages.get(key).getAverage()