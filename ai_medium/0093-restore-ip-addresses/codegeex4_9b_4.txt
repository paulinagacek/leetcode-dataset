from typing import List

class Solution:
    def restoreIpAddresses(self, s: str) -> List[str]:
        def is_valid(ip_part):
            if len(ip_part) > 3 or int(ip_part) > 255:
                return False
            if ip_part[0] == '0' and len(ip_part) > 1:
                return False
            return True

        def backtrack(s, path, results):
            if len(path) == 4 and not s:
                results.append('.'.join(path))
                return
            if len(path) >= 4 or not s:
                return
            for i in range(1, min(4, len(s)+1)):
                ip_part = s[:i]
                if is_valid(ip_part):
                    backtrack(s[i:], path + [ip_part], results)

        results = []
        backtrack(s, [], results)
        return results
