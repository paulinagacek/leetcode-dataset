from typing import List

class Solution:
    def restoreIpAddresses(self, s: str) -> List[str]:
        def is_valid(segment):
            return int(segment) >= 0 and int(segment) <= 255 and (segment == '0' or segment[0] != '0')

        def restore_ip_addresses(s, segment_count):
            if segment_count == 4:
                if len(s) == 0:
                    return []
                return [s] if is_valid(s) else []
            
            result = []
            for i in range(1, min(4, len(s))):
                if not is_valid(s[:i]):
                    continue
                for ip_address in restore_ip_addresses(s[i:], segment_count + 1):
                    result.append(s[:i] + '.' + ip_address)
            return result
        
        return restore_ip_addresses(s, 0)
