class Solution:
    def flatten(self, root: Optional[TreeNode]) -> None:
        """
        Do not return anything, modify root in-place instead.
        """
        def dfs(node):
            if node is None:
                return None, None
            if node.left is None and node.right is None:
                return node, node
            left_root, left_end = dfs(node.left)
            right_root, right_end = dfs(node.right)
            if left_root is not None:
                left_end.right = node.right
                node.right = node.left
                node.left = None
            node.right = right_root
            return left_root or node, right_end or right_root

        dfs(root)
