class Solution:
    def generateMatrix(self, n: int) -> List[List[int]]:
        matrix = [[0]*n for _ in range(n)]
        dir_x = [0, 1, 0, -1]
        dir_y = [1, 0, -1, 0]
        x = y = 0
        dx = dy = 0
        for i in range(1, n*n+1):
            matrix[x][y] = i
            nx, ny = x+dx, y+dy
            if not (0 <= nx < n and 0 <= ny < n and matrix[nx][ny] == 0):
                dx, dy = dir_y[dy], dir_x[dx]
            x, y = x+dx, y+dy
        return matrix
