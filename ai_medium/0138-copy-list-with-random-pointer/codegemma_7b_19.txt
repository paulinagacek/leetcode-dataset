class Solution:
    def copyRandomList(self, head: 'Optional[Node]') -> 'Optional[Node]':
        if not head:
            return None
        
        # Create a dictionary to map original nodes to their copies
        node_map = {}
        
        # Create a new head for the copied list
        new_head = Node(head.val)
        node_map[head] = new_head
        
        # Iterate through the original list, creating copies of each node
        curr = head.next
        while curr:
            new_node = Node(curr.val)
            node_map[curr] = new_node
            curr = curr.next
        
        # Connect the new nodes based on the random pointers
        curr = head
        new_curr = new_head
        while curr:
            if curr.random in node_map:
                new_curr.random = node_map[curr.random]
            curr = curr.next
            new_curr = new_curr.next
        
        return new_head
