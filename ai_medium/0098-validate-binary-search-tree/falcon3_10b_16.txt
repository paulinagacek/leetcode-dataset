class Solution:
    def isValidBST(self, root: Optional[TreeNode]) -> bool:
        return self.helper(root) == (True, float('-inf'), float('inf'))

    def helper(self, node, left=float('-inf'), right=float('inf')):
        if not node:
            return True
        val, left_val, right_val = node.val, node.left, node.right
        if not (left < val < right):
            return False
        return (self.helper(left, left, val) and self.helper(right, val, right))
