# Definition for singly-linked list.
# class ListNode:
#     def __init__(self, val=0, next=None):
#         self.val = val
#         self.next = next
class Solution:
    def partition(self, head: Optional[ListNode], x: int) -> Optional[ListNode]:
        less = None
        less_tail = None
        greater = None
        greater_tail = None
        current = head
        while current:
            next_node = current.next
            if current.val < x:
                if less is None:
                    less = current
                    less_tail = current
                else:
                    less_tail.next = current
                    less_tail = current
            else:
                if greater is None:
                    greater = current
                    greater_tail = current
                else:
                    greater_tail.next = current
                    greater_tail = current
            current.next = None
            current = next_node
        if less is None:
            return greater
        else:
            less_tail.next = greater
            return less
