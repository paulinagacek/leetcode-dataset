class Solution:
    def isValidSudoku(self, board: List[List[str]]) -> bool:
        seen = set()
        rows = [set() for _ in range(9)]
        cols = [set() for _ in range(9)]
        blocks = [set() for _ in range(9)]

        for i in range(9):
            for j in range(9):
                if board[i][j] != ".":
                    block_index = (i // 3) * 3 + j // 3
                    if (
                        (board[i][j], row, col, block)
                        in seen
                        for row in rows[i]
                        for col in cols[j]
                        for block in blocks[block_index]
                    ):
                        return False

                    seen.add((board[i][j], i, j, block_index))
                    rows[i].add(board[i][j])
                    cols[j].add(board[i][j])
                    blocks[block_index].add(board[i][j])

        return True
