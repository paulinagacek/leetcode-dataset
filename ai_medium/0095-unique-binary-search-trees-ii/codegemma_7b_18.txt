from functools import lru_cache

# Definition for a binary tree node.
class TreeNode:
    def __init__(self, val=0, left=None, right=None):
        self.val = val
        self.left = left
        self.right = right

@lru_cache(maxsize=None)
def generateTreesHelper(n: int) -> List[Optional[TreeNode]]:
    if n <= 0:
        return [None,]

    result = []
    for i in range(1, n + 1):
        left_trees = generateTreesHelper(i - 1)
        right_trees = generateTreesHelper(n - i)

        for left in left_trees:
            for right in right_trees:
                result.append(TreeNode(i, left, right))

    return result

class Solution:
    def generateTrees(self, n: int) -> List[Optional[TreeNode]]:
        return generateTreesHelper(n)
