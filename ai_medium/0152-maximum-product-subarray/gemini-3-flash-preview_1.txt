class Solution:
    def maxProduct(self, nums: List[int]) -> int:
        if not nums:
            return 0
        
        # Initialize the maximum, minimum, and result with the first element
        max_so_far = nums[0]
        min_so_far = nums[0]
        result = nums[0]
        
        for i in range(1, len(nums)):
            curr = nums[i]
            
            # If the current number is negative, the maximum and minimum values 
            # will swap their roles after multiplication.
            if curr < 0:
                max_so_far, min_so_far = min_so_far, max_so_far
                
            # Update max_so_far and min_so_far by comparing the current element
            # itself with the product of the current element and the previous values.
            max_so_far = max(curr, max_so_far * curr)
            min_so_far = min(curr, min_so_far * curr)
            
            # The final result will be the largest max_so_far encountered so far.
            result = max(result, max_so_far)
            
        return result
