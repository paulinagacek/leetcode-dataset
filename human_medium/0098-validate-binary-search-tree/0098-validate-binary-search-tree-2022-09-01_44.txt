class Solution:
    def isValidBST(self, root: Optional[TreeNode]) -> bool:
        queue = [[root, [-10**31-1,10**31+1]]]
        while queue:
            node, borders = queue.pop()
            if not borders[0] < node.val < borders[1]:
                return False
            if node.left:
                queue.append([node.left,[borders[0], node.val] ])
            if node.right:
                queue.append([node.right,[node.val, borders[1]] ])
        return True
