class Solution:
    def sortedListToBST(self, head: Optional[ListNode]) -> Optional[TreeNode]:
        length = 0
        curr = head
        while curr:
            length += 1
            curr = curr.next

        def value(mid):
            curr = head
            while curr and mid >= 1:
                mid -= 1
                curr = curr.next

            return curr.val

        def BSTbuilder(start, end):
            if start > end:
                return None

            mid = (start + end) // 2
            return TreeNode(value(mid), BSTbuilder(start, mid - 1), BSTbuilder(mid + 1, end))

        return BSTbuilder(0, length - 1)
