class Solution:
    def generateTrees(self, n: int) -> List[Optional[TreeNode]]:
        
        @cache
        def helper(start, size):
            if size == 0:
                return [None]
            
            if size == 1:
                return [TreeNode(start)]
            
            res = []
            for mid in range(start, start + size):                
                for left, right in itertools.product(helper(start,mid-start), helper(mid+1,size-mid+start-1)):
                    root = TreeNode(mid)
                    root.left = left
                    root.right = right
                    res.append(root)
            return res
        
        return helper(1,n)
