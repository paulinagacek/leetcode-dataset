class Solution:
    def numTrees(self, n: int) -> int:
        
        @cache
        def allWays(low, high):
            if low >= high: return 1 
            
            totalWays = 0
            for rootVal in range(low, high + 1):
                totalWays += allWays(low, rootVal - 1) * allWays(rootVal + 1, high)
            return totalWays
        
        return allWays(1, n)
