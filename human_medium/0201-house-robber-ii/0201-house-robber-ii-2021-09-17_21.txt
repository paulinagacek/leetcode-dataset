class Solution:
    def hh(self,nums):
        dp=nums.copy()    #memo table

        dp[1]=max(dp[0],dp[1])
        #this loop stores the values in memo table as : highest amount that can be stolen upto that house
        for i in range(2,len(nums)):
            dp[i]=max(dp[i-2]+nums[i],dp[i-1])
        return max(dp)

    def rob(self, nums: List[int]) -> int:
        if len(nums)<3:     #if less than 3 numbers are present in array then no need to loop
            return max(nums)
        # as first element and last element cant be used at the same time we can consider one at time and run the process
        return max(self.hh(nums[1:]),self.hh(nums[:-1]))
