class Solution:
    def copyRandomList(self, head: \'Optional[Node]\') -> \'Optional[Node]\':
        
        if head == None:
            return None
            
        mapping = {}
        new_head = Node(head.val)
        mapping[head] = new_head
        p = head
        q = new_head
        while p.next:
            q.next = Node(p.next.val)
            mapping[p.next] = q.next
            p = p.next
            q = q.next
        q.next = None
                   
        p = head
        q = new_head
        while p:
            if p.random != None:
                q.random = mapping[p.random]
            p = p.next
            q = q.next
        
        return new_head
