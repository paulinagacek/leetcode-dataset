class Solution:
    def subsetsWithDup(self, nums: List[int]) -> List[List[int]]:
        def func(index,curr):
            nonlocal nums,n,ans
            ans.append(curr)
            if index>=n:
                return
            for i in range(index,n):
                if i>index and nums[i]==nums[i-1]:
                    continue
                func(i+1,curr+[nums[i]])
        n=len(nums)
        nums.sort()
        ans=[]
        func(0,[])
        return ans
