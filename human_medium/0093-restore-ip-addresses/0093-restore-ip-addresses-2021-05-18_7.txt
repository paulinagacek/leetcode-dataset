class Solution:
    def restoreIpAddresses(self, s: str) -> List[str]:
        ans = set()
        if len(s) < 4 or len(s) > 12:
            return ans
        
        def isValid(num):
            if not num:
                return False
            if len(num) == 1:
                return True
            if len(num) > 3:
                return False
            if num.startswith(\'0\'):
                return False
            if int(num) > 255:
                return False
            return True
        
        def dfs(curr_index, address_till_now, number_of_points):
            if number_of_points == 3:
                if isValid(s[curr_index: ]):
                    new_address = address_till_now + \'.\'+ s[curr_index: ]
                    ans.add(new_address[1:])
                return 
            for next_index in [curr_index + 1, curr_index + 2, curr_index + 3]:
                if isValid(s[curr_index: next_index]):
                    dfs(next_index, address_till_now + \'.\' + s[curr_index: next_index], number_of_points + 1)
                    
        dfs(0, \'\', 0)
        return ans
