class Solution:
    def canFinish(self, n: int, pre: List[List[int]]) -> bool:
        """
        Detect cycle using DFS. Color nodes as per the following:
        White (False) - Node is never visited
        Grey (None) - Node is being DFS\'ed upon (i.e. it\'s adjacent nodes are being recursively visited). If we land on a grey node in our DFS; there\'s a cycle.
        Black (True) - Node and all it\'s adjacent vertices are visited.
        """
        # Create adjancency list
        adj = [[] for i in range(n)]
        for u, v in pre:
            adj[v].append(u)

        visited = [False]*n  # Start with all "white"s
        
        def isCyclic(i):
            if visited[i] is None:
                return True
            
            if visited[i] is True:
                return False
            
            visited[i] = None  # Set color of node to "grey"
            for nbr in adj[i]:
                if isCyclic(nbr):
                    return True
                
            visited[i] = True  # Set color of node to "black"
            
            return False
        
        for i in range(n):
            if isCyclic(i):
                return False
            
        return True
