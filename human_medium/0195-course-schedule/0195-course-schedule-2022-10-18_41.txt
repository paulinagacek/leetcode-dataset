class Solution:
    # O(V + E) time,
    # O(V + E) space,
    # Approach: dfs coloring, topological sort
    def canFinish(self, numCourses: int, prerequisites: List[List[int]]) -> bool:
        
        graph = defaultdict(list)
        
        for course, required in prerequisites:
            graph[required].append(course)
            
        
        def hasCycle(curr_course, colors):
            if colors[curr_course] == 2:    return False
            
            if colors[curr_course] == 1:    return True
            
            colors[curr_course] = 1
            
            for neighbor in graph[curr_course]:
                if hasCycle(neighbor, colors):  return True
            
            colors[curr_course] = 2
            return False
        
        
        colors = [0 for _ in range(numCourses)]
        for course in range(numCourses):
            if hasCycle(course, colors):    return False
            
        return True
